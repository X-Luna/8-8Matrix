        ORG 0000H	
        LJMP MAIN
	ORG 000BH;T0的中断入口
        LJMP ITOP
        ORG 0100H
MAIN:
	LCALL PWON
START:
	LCALL RDKEY
	SJMP START
RDKEY:
	MOV A,P1
	JZ KOVER
	JNB ACC.0,MAIN1
	JNB ACC.1,MAIN2
	SJMP KOVER
KOVER:
	RET
ITOP:
	MOV TL0,#40H;T0中断子程序,重装初值
        MOV TH0,#4DH
	DJNZ 10H,LOOP
	MOV 10H,#14H
	DJNZ 11H,LOOP
	MOV 12H,#01H
LOOP:
	RETI
MAIN1:
 	MOV SP,#60H;设堆栈指针
	MOV 10H,#14H;设内循环次数20次
	MOV 11H,#3CH;设外循环次数60次
	MOV TMOD,#01H;设T0工作在方式1
        MOV TL0,#40H;给T0设初值,50ms
        MOV TH0,#4DH
	SETB TR0;启动T0
        SETB ET0
        SETB EA
	MOV 12H,#00H
	MOV P0,#00H
	MOV P2,#0FFH
	LCALL DISPAL;静止显示"姓名心形中国1"
MAIN3:
	MOV R5,#00H
	MOV P0,#00H
	MOV P2,#0FFH
	MOV R3,#08H
	LCALL DISP;滚动显示学号后两位1
	MOV A,12H
	CJNE A,#01H,MAIN3
	MOV 12H,#00H
	SJMP MAIN1
MAIN2:
 	MOV SP,#60H;设堆栈指针
	MOV 10H,#14H;设内循环次数20次
	MOV 11H,#3CH;设外循环次数60次
	MOV TMOD,#01H;设T0工作在方式1
        MOV TL0,#40H;给T0设初值,50ms
        MOV TH0,#4DH
	SETB TR0;启动T0
        SETB ET0
        SETB EA
	MOV 12H,#00H
	MOV P0,#00H
	MOV P2,#0FFH
	LCALL DISPALY;静止显示"姓名心形中国2"
MAIN4:
	MOV R5,#00H
	MOV P0,#00H
	MOV P2,#0FFH
	MOV R3,#08H
	LCALL DISPY;滚动显示学号后两位2
	MOV A,12H
	CJNE A,#01H,MAIN4
	MOV 12H,#00H
	SJMP MAIN2
PWON:
	LCALL PWONDISP
	RET
PWONDISP:
	MOV R4,#20;每屏扫描20次
PWONDISP_0:
	MOV R1,#00H
	MOV A,R5
	MOV R2,A
	MOV R3,#08H
PWONDISP_1:
	MOV DPTR,#TAB1
	MOV A,R1
	MOVC A,@A+DPTR
	MOV P0,A
	INC R1
	MOV A,P1
	JNB ACC.0,S1
	JNB ACC.1,S2
	MOV DPTR,#TAB4
	MOV A,R2
	MOVC A,@A+DPTR
	MOV P2,A
	INC R2
	LCALL DELAY1MS
	DJNZ R3,PWONDISP_1
	DJNZ R4, PWONDISP_0
	INC R5
	MOV A,R5
	JNB ACC.6,PWONDISP
	RET
DISPAL:
	MOV R7,#00H
	MOV R6,#6;静止显示字个数
	MOV R4,#20
	MOV R0,#20
DISPAL_0:
	MOV R1,#00H
	MOV A,R7
	MOV R2,A
	MOV R3,#08H
DISPAL_1:
	MOV DPTR,#TAB1
	MOV A,R1
	MOVC A,@A+DPTR
	MOV P0,A
	INC R1
	MOV A,P1
	JNB ACC.0,S1
	JNB ACC.1,S2
	MOV DPTR,#TAB2
	MOV A,R2
	MOVC A,@A+DPTR
	MOV P2,A
	INC R2
	LCALL DELAY1MS
	DJNZ R3,DISPAL_1
	DJNZ R4,DISPAL_0
	MOV A,R7
	ADD A,#08H
	MOV R7,A
	MOV A,R0
	MOV R4,A
	DJNZ R6,DISPAL_0
	RET
DISP:
	MOV A,R0
	MOV R4,A
DISP_0:
	MOV R1,#00H
	MOV A,R5
	MOV R2,A
	MOV R3,#08H
DISP_1:
	MOV DPTR,#TAB1
	MOV A,R1
	MOVC A,@A+DPTR
	MOV P0,A
	INC R1
	MOV A,P1
	JNB ACC.0,S1
	JNB ACC.1,S2
	MOV DPTR,#TAB3
	MOV A,R2
	MOVC A,@A+DPTR
	MOV P2,A
	INC R2
	LCALL DELAY1MS
	DJNZ R3,DISP_1
	DJNZ R4,DISP_0
	INC R5
	MOV A,R5
	JNB ACC.4,DISP
	RET
S1:     
        LJMP MAIN1
S2:     
        LJMP MAIN2
DISPALY:
	MOV R7,#00H
	MOV R6,#6;静止显示字个数
	MOV R4,#20
	MOV R0,#20
DISPALY_0:
	MOV R1,#00H
	MOV A,R7
	MOV R2,A
	MOV R3,#08H
DISPALY_1:
	MOV DPTR,#TAB1
	MOV A,R1
	MOVC A,@A+DPTR
	MOV P0,A
	INC R1
	MOV A,P1
	JNB ACC.0,S1
	JNB ACC.1,S2
	MOV DPTR,#TAB5
	MOV A,R2
	MOVC A,@A+DPTR
	MOV P2,A
	INC R2
	LCALL DELAY1MS
	DJNZ R3,DISPALY_1
	DJNZ R4,DISPALY_0
	MOV A,R7
	ADD A,#08H
	MOV R7,A
	MOV A,R0
	MOV R4,A
	DJNZ R6,DISPALY_0
	RET
DISPY:
	MOV A,R0
	MOV R4,A
DISPY_0:
	MOV R1,#00H
	MOV A,R5
	MOV R2,A
	MOV R3,#08H
DISPY_1:
	MOV DPTR,#TAB1
	MOV A,R1
	MOVC A,@A+DPTR
	MOV P0,A
	INC R1
	MOV A,P1
	JNB ACC.0,S1
	JNB ACC.1,S2
	MOV DPTR,#TAB6
	MOV A,R2
	MOVC A,@A+DPTR
	MOV P2,A
	INC R2
	LCALL DELAY1MS
	DJNZ R3,DISPY_1
	DJNZ R4,DISPY_0
	INC R5
	MOV A,R5
	JNB ACC.4,DISPY
	RET
DELAY1MS:
        MOV 40H,#01H
DL1:
        MOV 41H,#8EH
DL0:
        MOV 42H,#02H
        DJNZ 42H,$
        DJNZ 41H,DL0
        DJNZ 40H,DL1
        RET
TAB1:
        DB 80H,40H,20H,10H,08H,04H,02H,01H
TAB2:
	DB 0F9H, 0C2H, 000H, 0ABH, 0A3H, 0ADH, 006H, 0FFH;
        DB 0F7H, 080H, 0DBH, 0EBH, 0F7H, 0EBH, 09CH, 0FFH;
        DB 0F7H, 0EBH, 080H, 0F7H, 0C1H, 0E5H, 080H, 0FFH;
	DB 0BDH, 018H, 000H, 000H, 081H, 0C3H, 0E7H, 0FFH;
        DB 0E7H, 0E7H, 000H, 066H, 066H, 000H, 0E7H, 0E7H;
        DB 080H, 080H, 0B6H, 080H, 0B4H, 08AH, 0B4H, 0FFH;
TAB3:
        DB 083H, 0BFH, 0BFH, 083H, 0BBH, 0BBH, 083H, 0FFH;
        DB 0FFH, 083H, 0FBH, 0FBH, 0FBH, 0FBH, 0FBH, 0FFH;
	DB 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH;
TAB4:
	DB 0FFH, 0BDH, 0A5H, 0A5H, 0A5H, 0A5H, 0DBH, 0FFH;"W"
        DB 0FFH, 081H, 0BFH, 081H, 081H, 0BFH, 081H, 0FFH;"E"
        DB 0FFH, 09FH, 09FH, 09FH, 09FH, 081H, 081H, 0FFH;"L"
        DB 0FFH, 081H, 081H, 09FH, 09FH, 081H, 081H, 0FFH;"C"
        DB 0FFH, 081H, 081H, 099H, 099H, 081H, 081H, 0FFH;"O"
        DB 0FFH, 0BDH, 099H, 0A5H, 0BDH, 0BDH, 0BDH, 0FFH;"M"
        DB 0FFH, 081H, 0BFH, 081H, 081H, 0BFH, 081H, 0FFH;"E"
	DB 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH;"空屏"
	DB 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH;"空屏"
TAB5:
        DB 016H, 0D5H, 093H, 0A0H, 0D3H, 0D5H, 016H, 0FFH;
        DB 06BH, 0A0H, 0DBH, 040H, 0BFH, 0E0H, 0AEH, 060H;
        DB 0F7H, 080H, 041H, 0F7H, 080H, 0F7H, 0E7H, 0FFH;
        DB 0BDH, 018H, 000H, 000H, 081H, 0C3H, 0E7H, 0FFH;
        DB 0E7H, 0E7H, 000H, 066H, 066H, 000H, 0E7H, 0E7H;
        DB 080H, 080H, 0B6H, 080H, 0B4H, 08AH, 0B4H, 0FFH;
TAB6:	
        DB 0FFH, 083H, 0FBH, 0FBH, 0FBH, 0FBH, 0FBH, 0FFH;
        DB 0FFH, 0BBH, 0BBH, 0BBH, 081H, 0FBH, 0FBH, 0FFH;
	DB 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH, 0FFH;
        END
